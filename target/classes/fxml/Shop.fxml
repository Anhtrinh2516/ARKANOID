<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.Tab?>
<?import javafx.scene.control.TabPane?>
<?import javafx.scene.control.Tooltip?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.shape.Circle?>

<AnchorPane prefHeight="708" prefWidth="1148" style="-fx-background-color: #1a1d2e;" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="org.example.controller.ShopController">

    <!-- Decorative stars background -->
    <Circle centerX="100" centerY="80" fill="white" opacity="0.4" radius="1.5" />
    <Circle centerX="300" centerY="120" fill="white" opacity="0.3" radius="1" />
    <Circle centerX="500" centerY="90" fill="white" opacity="0.5" radius="1.5" />
    <Circle centerX="700" centerY="110" fill="white" opacity="0.3" radius="1" />
    <Circle centerX="900" centerY="85" fill="white" opacity="0.4" radius="1.5" />
    <Circle centerX="1050" centerY="100" fill="white" opacity="0.3" radius="1" />
    <Circle centerX="150" centerY="500" fill="white" opacity="0.3" radius="1.5" />
    <Circle centerX="950" centerY="550" fill="white" opacity="0.4" radius="1" />

    <!-- Main Content -->
    <VBox layoutX="23.0" spacing="0" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="23.0" AnchorPane.rightAnchor="-23.0" AnchorPane.topAnchor="0.0">

        <!-- Header Bar with Back Button -->
        <HBox alignment="CENTER_LEFT" spacing="20" style="-fx-padding: 20 30 15 30; -fx-background-color: #252938;">
            <!-- Back Button -->
            <Button onAction="#backToMenu" prefHeight="40" prefWidth="120" style="-fx-background-color: #3d4463;                            -fx-text-fill: #e0e0e0;                            -fx-font-size: 14px;                            -fx-font-weight: 600;                            -fx-background-radius: 8;                            -fx-cursor: hand;                            -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.3), 5, 0, 0, 2);" text="â† BACK">
                <tooltip>
                    <Tooltip text="Return to Main Menu" />
                </tooltip>
            </Button>

            <Region HBox.hgrow="ALWAYS" />

            <!-- Title and Coins -->
            <VBox alignment="CENTER" spacing="5">
                <Label style="-fx-font-size: 36px; -fx-font-weight: bold;                               -fx-text-fill: linear-gradient(to right, #5dadec, #a78bfa);                               -fx-effect: dropshadow(gaussian, rgba(0,212,255,0.4), 8, 0, 0, 0);" text="SPACE SHOP" />
                <Label fx:id="coinsLabel" style="-fx-font-size: 18px; -fx-font-weight: 600;                               -fx-text-fill: #ffd700;" text="ðŸ’° 0 Coins" />
            </VBox>

            <Region HBox.hgrow="ALWAYS" />

            <!-- Message Label -->
            <Label fx:id="messageLabel" alignment="CENTER_RIGHT" prefWidth="200" style="-fx-font-size: 13px; -fx-font-weight: 600;" text="" wrapText="true" />
        </HBox>

        <!-- Tab Pane -->
        <TabPane style="-fx-background-color: #1a1d2e; -fx-padding: 0 30 30 30;" tabClosingPolicy="UNAVAILABLE" VBox.vgrow="ALWAYS">

            <!-- TAB 1: SHOP -->
            <Tab closable="false" text="ðŸ›’ SHOP">
                <ScrollPane fitToHeight="true" fitToWidth="true" prefHeight="540.0" prefWidth="1181.0" style="-fx-background: #1a1d2e; -fx-background-color: #1a1d2e;">
                    <VBox spacing="25" style="-fx-padding: 25;">

                        <!-- Consumable Items Section -->
                        <VBox spacing="12">
                            <Label style="-fx-font-size: 16px; -fx-font-weight: 600; -fx-text-fill: #8b9dc3;                                           -fx-padding: 0 0 5 0;" text="CONSUMABLE ITEMS" />

                            <GridPane alignment="CENTER" hgap="15" vgap="15">

                                <!-- Wide Paddle -->
                                <VBox alignment="CENTER" spacing="8" style="-fx-background-color: #2d3250;                                              -fx-padding: 20;                                              -fx-border-radius: 10;                                              -fx-background-radius: 10;                                              -fx-border-color: #3d4463;                                              -fx-border-width: 1.5;                                              -fx-pref-width: 280;                                              -fx-pref-height: 240;                                              -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.2), 5, 0, 0, 2);" GridPane.columnIndex="0" GridPane.rowIndex="0">
                                    <Label style="-fx-font-size: 32px;" text="ðŸ›¸" />
                                    <Label style="-fx-font-size: 16px; -fx-font-weight: 600; -fx-text-fill: #e0e0e0;" text="Wide Paddle" />
                                    <Label alignment="CENTER" maxWidth="250" style="-fx-font-size: 11px; -fx-text-fill: #8b9dc3; -fx-wrap-text: true;" text="Expand paddle for 10s" />
                                    <Label fx:id="wideItemLabel" style="-fx-font-size: 10px; -fx-text-fill: #5dadec; -fx-font-weight: 600;" text="Owned: 0" />
                                    <Region minHeight="5" VBox.vgrow="ALWAYS" />
                                    <Label style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #ffd700;" text="3 ðŸ’°" />
                                    <Button onAction="#buyWideItem" prefHeight="32" prefWidth="110" style="-fx-background-color: #5dadec;                                                    -fx-text-fill: white;                                                    -fx-font-weight: 600;                                                    -fx-font-size: 12px;                                                    -fx-background-radius: 8;                                                    -fx-cursor: hand;                                                    -fx-effect: dropshadow(gaussian, rgba(93,173,236,0.4), 5, 0, 0, 0);" text="BUY" />
                                </VBox>

                                <!-- Extra Life -->
                                <VBox alignment="CENTER" spacing="8" style="-fx-background-color: #2d3250;                                              -fx-padding: 20;                                              -fx-border-radius: 10;                                              -fx-background-radius: 10;                                              -fx-border-color: #3d4463;                                              -fx-border-width: 1.5;                                              -fx-pref-width: 280;                                              -fx-pref-height: 240;                                              -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.2), 5, 0, 0, 2);" GridPane.columnIndex="1" GridPane.rowIndex="0">
                                    <Label style="-fx-font-size: 32px;" text="ðŸ’–" />
                                    <Label style="-fx-font-size: 16px; -fx-font-weight: 600; -fx-text-fill: #e0e0e0;" text="Extra Life" />
                                    <Label alignment="CENTER" maxWidth="250" style="-fx-font-size: 11px; -fx-text-fill: #8b9dc3; -fx-wrap-text: true;" text="Get +1 life when used" />
                                    <Label fx:id="lifeItemLabel" style="-fx-font-size: 10px; -fx-text-fill: #ff6b9d; -fx-font-weight: 600;" text="Owned: 0" />
                                    <Region minHeight="5" VBox.vgrow="ALWAYS" />
                                    <Label style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #ffd700;" text="5 ðŸ’°" />
                                    <Button onAction="#buyLifeItem" prefHeight="32" prefWidth="110" style="-fx-background-color: #ff6b9d;                                                    -fx-text-fill: white;                                                    -fx-font-weight: 600;                                                    -fx-font-size: 12px;                                                    -fx-background-radius: 8;                                                    -fx-cursor: hand;                                                    -fx-effect: dropshadow(gaussian, rgba(255,107,157,0.4), 5, 0, 0, 0);" text="BUY" />
                                </VBox>

                                <!-- Slow Ball -->
                                <VBox alignment="CENTER" spacing="8" style="-fx-background-color: #2d3250;                                              -fx-padding: 20;                                              -fx-border-radius: 10;                                              -fx-background-radius: 10;                                              -fx-border-color: #3d4463;                                              -fx-border-width: 1.5;                                              -fx-pref-width: 280;                                              -fx-pref-height: 240;                                              -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.2), 5, 0, 0, 2);" GridPane.columnIndex="2" GridPane.rowIndex="0">
                                    <Label style="-fx-font-size: 32px;" text="ðŸŒ" />
                                    <Label style="-fx-font-size: 16px; -fx-font-weight: 600; -fx-text-fill: #e0e0e0;" text="Slow Ball" />
                                    <Label alignment="CENTER" maxWidth="250" style="-fx-font-size: 11px; -fx-text-fill: #8b9dc3; -fx-wrap-text: true;" text="Slow down ball for 10s" />
                                    <Label fx:id="slowItemLabel" style="-fx-font-size: 10px; -fx-text-fill: #72f072; -fx-font-weight: 600;" text="Owned: 0" />
                                    <Region minHeight="5" VBox.vgrow="ALWAYS" />
                                    <Label style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #ffd700;" text="4 ðŸ’°" />
                                    <Button onAction="#buySlowItem" prefHeight="32" prefWidth="110" style="-fx-background-color: #72f072;                                                    -fx-text-fill: #1a1d2e;                                                    -fx-font-weight: 600;                                                    -fx-font-size: 12px;                                                    -fx-background-radius: 8;                                                    -fx-cursor: hand;                                                    -fx-effect: dropshadow(gaussian, rgba(114,240,114,0.4), 5, 0, 0, 0);" text="BUY" />
                                </VBox>
                        <columnConstraints>
                           <ColumnConstraints />
                           <ColumnConstraints />
                           <ColumnConstraints />
                        </columnConstraints>
                        <rowConstraints>
                           <RowConstraints />
                        </rowConstraints>

                            </GridPane>
                        </VBox>

                        <!-- Separator -->
                        <Separator style="-fx-background-color: #3d4463; -fx-padding: 5 0;" />

                        <!-- Permanent Upgrades Section -->
                        <VBox spacing="12">
                            <Label style="-fx-font-size: 16px; -fx-font-weight: 600; -fx-text-fill: #8b9dc3;                                           -fx-padding: 0 0 5 0;" text="PERMANENT UPGRADES" />

                            <HBox alignment="CENTER" spacing="15">
                                <!-- Paddle Width Upgrade -->
                                <VBox alignment="CENTER" spacing="8" style="-fx-background-color: #2d3250;                                              -fx-padding: 20;                                              -fx-border-radius: 10;                                              -fx-background-radius: 10;                                              -fx-border-color: #a78bfa;                                              -fx-border-width: 2;                                              -fx-pref-width: 380;                                              -fx-pref-height: 220;                                              -fx-effect: dropshadow(gaussian, rgba(167,139,250,0.3), 8, 0, 0, 2);">
                                    <Label style="-fx-font-size: 36px;" text="ðŸ”§" />
                                    <Label style="-fx-font-size: 18px; -fx-font-weight: 600; -fx-text-fill: #e0e0e0;" text="Paddle Width +20" />
                                    <Label style="-fx-font-size: 12px; -fx-text-fill: #8b9dc3;" text="Permanently wider paddle" />
                                    <Region minHeight="8" VBox.vgrow="ALWAYS" />
                                    <Label style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: #ffd700;" text="8 ðŸ’°" />
                                    <Button onAction="#buyPaddleWidth" prefHeight="36" prefWidth="150" style="-fx-background-color: #a78bfa;                                                    -fx-text-fill: white;                                                    -fx-font-weight: 600;                                                    -fx-font-size: 13px;                                                    -fx-background-radius: 8;                                                    -fx-cursor: hand;                                                    -fx-effect: dropshadow(gaussian, rgba(167,139,250,0.4), 5, 0, 0, 0);" text="BUY UPGRADE" />
                                </VBox>
                            </HBox>
                        </VBox>

                    </VBox>
                </ScrollPane>
            </Tab>

            <!-- TAB 2: SKINS -->
            <Tab closable="false" text="ðŸŽ¨ SKINS">
                <ScrollPane fitToHeight="true" fitToWidth="true" style="-fx-background: #1a1d2e; -fx-background-color: #1a1d2e;">
                    <VBox alignment="TOP_CENTER" spacing="30" style="-fx-padding: 30;">

                        <!-- Paddle Skins -->
                        <VBox alignment="CENTER" spacing="15" style="-fx-background-color: #2d3250;                                      -fx-padding: 25;                                      -fx-border-radius: 10;                                      -fx-background-radius: 10;                                      -fx-border-color: #5dadec;                                      -fx-border-width: 2;                                      -fx-max-width: 950;                                      -fx-effect: dropshadow(gaussian, rgba(93,173,236,0.25), 8, 0, 0, 2);">
                            <Label style="-fx-font-size: 18px; -fx-font-weight: 600; -fx-text-fill: #5dadec;" text="PADDLE SKINS" />
                            <Label style="-fx-font-size: 11px; -fx-text-fill: #8b9dc3;" text="Gold border = equipped Â· Green border = selected" />
                            <HBox fx:id="paddleSkinBox" alignment="CENTER" spacing="10">
                                <padding>
                                    <Insets bottom="8" top="8" />
                                </padding>
                            </HBox>
                            <Button fx:id="selectPaddleButton" onAction="#handlePaddleAction" prefHeight="36" prefWidth="160" style="-fx-font-size: 13px;                                            -fx-background-color: #5dadec;                                            -fx-text-fill: white;                                            -fx-font-weight: 600;                                            -fx-border-radius: 8;                                            -fx-background-radius: 8;                                            -fx-cursor: hand;                                            -fx-effect: dropshadow(gaussian, rgba(93,173,236,0.4), 5, 0, 0, 0);" text="SELECT" />
                        </VBox>

                        <!-- Ball Skins -->
                        <VBox alignment="CENTER" spacing="15" style="-fx-background-color: #2d3250;                                      -fx-padding: 25;                                      -fx-border-radius: 10;                                      -fx-background-radius: 10;                                      -fx-border-color: #ff6b9d;                                      -fx-border-width: 2;                                      -fx-max-width: 950;                                      -fx-effect: dropshadow(gaussian, rgba(255,107,157,0.25), 8, 0, 0, 2);">
                            <Label style="-fx-font-size: 18px; -fx-font-weight: 600; -fx-text-fill: #ff6b9d;" text="BALL SKINS" />
                            <Label style="-fx-font-size: 11px; -fx-text-fill: #8b9dc3;" text="Gold border = equipped Â· Green border = selected" />
                            <HBox fx:id="ballSkinBox" alignment="CENTER" spacing="10">
                                <padding>
                                    <Insets bottom="8" top="8" />
                                </padding>
                            </HBox>
                            <Button fx:id="selectBallButton" onAction="#handleBallAction" prefHeight="36" prefWidth="160" style="-fx-font-size: 13px;                                            -fx-background-color: #ff6b9d;                                            -fx-text-fill: white;                                            -fx-font-weight: 600;                                            -fx-border-radius: 8;                                            -fx-background-radius: 8;                                            -fx-cursor: hand;                                            -fx-effect: dropshadow(gaussian, rgba(255,107,157,0.4), 5, 0, 0, 0);" text="SELECT" />
                        </VBox>

                    </VBox>
                </ScrollPane>
            </Tab>

        </TabPane>

    </VBox>

</AnchorPane>
